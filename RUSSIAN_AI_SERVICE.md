# –†–æ—Å—Å–∏–π—Å–∫–∏–π AI –°–µ—Ä–≤–∏—Å (Russian AI Service)

–ó–∞–º–µ–Ω–∞ Google Gemini –Ω–∞ —Ä–æ—Å—Å–∏–π—Å–∫–∏–µ AI —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã

1. **YandexGPT** - –¥–ª—è —á–∞—Ç–∞, –∞–Ω–∞–ª–∏–∑–∞ —Å—é–∂–µ—Ç–∞ –∏ —ç–≤–æ–ª—é—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
2. **Yandex SpeechKit** - –¥–ª—è —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏ (Text-to-Speech)
3. **–ó–∞–≥–ª—É—à–∫–∏** - –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –≤–∏–¥–µ–æ (–ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
6/services/
‚îú‚îÄ‚îÄ geminiService.ts          # –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å (—Å–æ—Ö—Ä–∞–Ω–µ–Ω)
‚îî‚îÄ‚îÄ russianAIService.ts       # –ù–æ–≤—ã–π —Ä–æ—Å—Å–∏–π—Å–∫–∏–π —Å–µ—Ä–≤–∏—Å
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤–∞—à–∏–º–∏ API –∫–ª—é—á–∞–º–∏:

```bash
cp .env.example .env
```

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π Yandex

#### YandexGPT:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [console.cloud.yandex.ru](https://console.cloud.yandex.ru/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á –∏ Folder ID
4. –ù–∞–∑–Ω–∞—á—å—Ç–µ —Ä–æ–ª–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å YandexGPT

#### Yandex SpeechKit:
1. –í —Ç–æ–π –∂–µ –∫–æ–Ω—Å–æ–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø –∫ SpeechKit API
2. –ü–æ–ª—É—á–∏—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π API –∫–ª—é—á –¥–ª—è SpeechKit

### 3. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
YANDEX_API_KEY=your_yandex_gpt_api_key
YANDEX_FOLDER_ID=your_folder_id
YANDEX_SPEECH_KEY=your_speech_kit_api_key
```

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### ‚úÖ TTS (Text-to-Speech)
- **–§—É–Ω–∫—Ü–∏—è**: `generateSpeech(text, voiceName)`
- **–°–µ—Ä–≤–∏—Å**: Yandex SpeechKit
- **–ì–æ–ª–æ—Å–∞**: kore, zahar, ermil, jane, madirus
- **–§–æ—Ä–º–∞—Ç**: AudioBuffer (—Å–æ–≤–º–µ—Å—Ç–∏–º —Å –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–º)

#### ‚úÖ –ß–∞—Ç –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
- **–§—É–Ω–∫—Ü–∏—è**: `streamCharacterResponse(...)`
- **–°–µ—Ä–≤–∏—Å**: YandexGPT
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: 
  - –ü–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –æ—Ç–≤–µ—Ç–æ–≤ (—Å–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ NSFW —Ä–µ–∂–∏–º–∞
  - –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º API

#### ‚úÖ –ê–Ω–∞–ª–∏–∑ —Å—é–∂–µ—Ç–∞
- **–§—É–Ω–∫—Ü–∏—è**: `getPlotSummary(messages, characterDescriptions)`
- **–°–µ—Ä–≤–∏—Å**: YandexGPT
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è —Å—Ü–µ–Ω –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

#### ‚úÖ –≠–≤–æ–ª—é—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- **–§—É–Ω–∫—Ü–∏—è**: `analyzeCharacterEvolution(...)`
- **–°–µ—Ä–≤–∏—Å**: YandexGPT
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–æ–≤–µ–¥–µ–Ω–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π

### –ó–∞–≥–ª—É—à–∫–∏ (–ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

#### üîÑ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **–§—É–Ω–∫—Ü–∏—è**: `generateImage(prompt, referenceAvatars)`
- **–°—Ç–∞—Ç—É—Å**: –ó–∞–≥–ª—É—à–∫–∞ —Å placeholder –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
- **–ü–ª–∞–Ω**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Kandinsky –∏–ª–∏ –®–µ–¥–µ–≤—Ä—É–º

#### üîÑ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–æ–Ω–æ–≤
- **–§—É–Ω–∫—Ü–∏—è**: `generateBackground(plotSummary, referenceAvatars)`
- **–°—Ç–∞—Ç—É—Å**: –ó–∞–≥–ª—É—à–∫–∞ —Å placeholder –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
- **–ü–ª–∞–Ω**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

#### üîÑ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ
- **–§—É–Ω–∫—Ü–∏—è**: `generateVideo(prompt)`
- **–°—Ç–∞—Ç—É—Å**: –ó–∞–≥–ª—É—à–∫–∞ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É)
- **–ü–ª–∞–Ω**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —Ä–æ—Å—Å–∏–π—Å–∫–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–º–µ—é—Ç **–∏–¥–µ–Ω—Ç–∏—á–Ω—ã–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã** —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º `geminiService.ts`:

```typescript
// –í–º–µ—Å—Ç–æ:
import { generateSpeech, streamCharacterResponse, ... } from './services/geminiService';

// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
import { generateSpeech, streamCharacterResponse, ... } from './services/russianAIService';
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏—è
- Graceful fallback –¥–ª—è TTS —Ñ—É–Ω–∫—Ü–∏–π
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ

### Environment Variables

```typescript
// –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
process.env.YANDEX_API_KEY      // YandexGPT API –∫–ª—é—á
process.env.YANDEX_FOLDER_ID    // Yandex Folder ID
process.env.YANDEX_SPEECH_KEY   // SpeechKit API –∫–ª—é—á
process.env.API_KEY             // –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
```

## –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Ä–æ—Å—Å–∏–π—Å–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã

### –ü—Ä–æ—Å—Ç–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ

1. **–ò–º–ø–æ—Ä—Ç –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞**:
```typescript
// –ë—ã–ª–æ:
import { generateSpeech } from './services/geminiService';

// –°—Ç–∞–ª–æ:
import { generateSpeech } from './services/russianAIService';
```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** (—Å–º. –≤—ã—à–µ)

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**

### –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–∞ —Å–µ—Ä–≤–∏—Å–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:

```typescript
// –í—ã–±–æ—Ä–æ—á–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
import { generateSpeech } from './services/russianAIService'; // TTS —á–µ—Ä–µ–∑ Yandex
import { streamCharacterResponse } from './services/geminiService'; // –ß–∞—Ç —á–µ—Ä–µ–∑ Gemini
```

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–ü–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞**: YandexGPT –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–∞—Å—Ç–æ—è—â—É—é –ø–æ—Ç–æ–∫–æ–≤—É—é –ø–µ—Ä–µ–¥–∞—á—É, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏–º—É–ª—è—Ü–∏—è
2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ–¥–∏–∞**: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –≤–∏–¥–µ–æ –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
3. **NSFW —Ä–µ–∂–∏–º**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ–º–ø—Ç–æ–≤, –Ω–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ API

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

1. **–°—É–≤–µ—Ä–µ–Ω–∏—Ç–µ—Ç –¥–∞–Ω–Ω—ã—Ö**: –î–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –≤ –†–æ—Å—Å–∏–∏
2. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –ù–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–∞–Ω–∫—Ü–∏–π
3. **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: –†—É—Å—Å–∫–æ—è–∑—ã—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
4. **–°—Ç–æ–∏–º–æ—Å—Ç—å**: –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ —Ü–µ–Ω—ã –Ω–∞ —Ä–æ—Å—Å–∏–π—Å–∫–æ–º —Ä—ã–Ω–∫–µ

## –†–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Kandinsky API
2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ**: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–æ—Å—Å–∏–π—Å–∫–∏–º –≤–∏–¥–µ–æ-—Å–µ—Ä–≤–∏—Å–∞–º
3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –∏ –∞–ª–µ—Ä—Ç–æ–≤

### –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:

1. –°–ª–µ–¥—É–π—Ç–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
2. –î–æ–±–∞–≤–ª—è–π—Ç–µ TypeScript —Ç–∏–ø—ã
3. –í–∫–ª—é—á–∞–π—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
4. –î–æ–±–∞–≤–ª—è–π—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
5. –û–±–Ω–æ–≤–ª—è–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ API –∫–ª—é—á–µ–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏